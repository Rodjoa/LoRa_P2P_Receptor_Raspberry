# Dragino LoRa App - Raspberry Pi
# Compila en C++ y enlaza wiringPi y MQTT

CC = g++
CFLAGS = -c -Wall -std=c++11
LIBS = -lwiringPi -lpaho-mqtt3c

# Nombre del binario
TARGET = dragino_lora_app
SRC = main.cpp
OBJ = main.o

# Regla por defecto
all: $(TARGET)

# Compilar el binario
$(TARGET): $(OBJ)
	@echo "ðŸ”¨ Linking $(TARGET)..."
	$(CC) $(OBJ) $(LIBS) -o $(TARGET)
	@echo "âœ… $(TARGET) creado!"

# Compilar objeto
$(OBJ): $(SRC)
	@echo "ðŸ”¨ Compiling $(SRC)..."
	$(CC) $(CFLAGS) $(SRC)

# Limpiar archivos compilados
clean:
	@echo "ðŸ§¹ Limpiando archivos compilados..."
	rm -f $(OBJ) $(TARGET)
	@echo "âœ… Limpieza completada!"

# Fuerza recompilaciÃ³n completa
rebuild: clean all

